angular.module("hopper.config",[]).constant("hopConfig",{env:"production",branch:{key:"key_live_beguHlDfspD5JYQSN9wc0jmktCkjEhi9"},analytics:{ga:{tracker:"UA-18588876-4"},facebook:{pixelId:"606504806122368"},mixpanel:{token:"57de26f3df9a4e9b56a939b5b0e983bb"}}}),angular.module("hopper.analytics",["hopper.config","angulartics","angulartics.mixpanel","angulartics.google.analytics","angulartics.facebook.pixel"]).config(["hopConfig","$analyticsProvider",function(e,n){return n.firstPageview(!0),n.virtualPageviews(!1),"production"!==e.env&&(n.registerPageTrack(function(e){return console.log("Page tracking: ",e)}),n.registerEventTrack(function(e,n){return console.log("Event tracking: ",e,n)})),ga("create",e.analytics.ga.tracker,"auto"),mixpanel.init(e.analytics.mixpanel.token,{track_pageview:!1}),fbq("init",e.analytics.facebook.pixelId)}]).directive("hopTrackClick",["$parse","$analytics",function(e,n){return{restrict:"A",link:function(t,r,i){var a,c;return a=i.hopTrackClick,c={},angular.forEach(i.$attr,function(n,r){var a,o;return n.match(/^p-/)?(a=n.replace(/^p-/,""),o=e(i[r]),c[a]=o(t)):void 0}),r.on("click",function(){return n.eventTrack(a,c)})}}}]),angular.module("hopper",["hopper.config","hopper.analytics","ui.bootstrap","ng.deviceDetector","ngAnimate","ngSanitize","ngCookies","com.2fdevs.videogular","com.2fdevs.videogular.plugins.overlayplay"]).directive("hopDeviceDetected",["deviceDetector",function(e){return{restrict:"A",link:function(e,n,t,r){return n.addClass("device-detected")}}}]).directive("hopAppear",["$timeout",function(e){return{restrict:"A",link:function(n,t,r,i){var a;return a=function(){return n.ready=!0},e(a,1e3)}}}]).directive("hopVgAutoFullscreen",["VG_STATES",function(e){return{restrict:"E",require:"^videogular",scope:{pauseOnExit:"@"},link:function(n,t,r,i){return n.onChangeState=function(n){switch(n){case e.PLAY:if(!i.isFullScreen)return i.toggleFullScreen();break;case e.STOP:if(i.isFullScreen)return i.toggleFullScreen()}},n.$watch(function(){return i.currentState},function(e,t){return n.onChangeState(e)}),n.$watch(function(){return i.isFullScreen},function(e){return n.pauseOnExit&&!e?i.pause():void 0})}}}]).directive("hopVgState",["$parse",function(e){return{restrict:"A",require:"^videogular",link:function(n,t,r,i){var a;return a=e(r.hopVgState),n.$watchGroup([function(){return i.currentState},function(){return i.isFullScreen}],function(e,t){var r;return r={playback:i.currentState,fullscreen:i.isFullScreen},e?a.assign(n,r):void 0})}}}]).directive("hopVgAnalytics",["$analytics","VG_STATES",function(e,n){return{restrict:"A",require:"^videogular",link:function(t,r,i,a){var c,o;return o=!1,c=function(t){switch(t){case n.PLAY:return o||e.eventTrack("p1_ba_homepage_action",{context:"play_video"}),o=!0}},t.$watch(function(){return a.currentState},function(e,n){return c(e)})}}}]).directive("hopPhoneNumber",function(){var e;return e=/^[+0-9() -]+$/,{restrict:"A",require:"ngModel",link:function(n,t,r,i){return i.$parsers.push(function(n){return e.test(n)?n:void 0})}}}).directive("hopAwardLink",["deviceDetector",function(e){return{restrict:"A",link:function(n,t,r){var i;return i=function(){switch(e.os){case"ios":return"http://hopper.com/download/app?device=ios";case"android":return"http://hopper.com/download/app?device=android";default:return"//www.hopper.com/corp/press.html"}}(),t.attr("href",i)}}}]).factory("branch",["hopConfig","$log",function(e,n){return branch.init(e.branch.key,function(e,t){return e?n.error(e):void 0}),branch}]).controller("HopSendLinkCtrl",["$scope","branch","$analytics","$log",function(e,n,t,r){var i;return e.$watch("phone",function(){return e.submitted=!1}),i=function(){return n.sendSMS(e.phone,{channel:"Web"},{},function(n,i){return e.$apply(function(){var i;return e.submitting=!1,n&&r.error(n),e.submitted=!0,n&&(e.isSuccess=!1),n||(e.isSuccess=!0),i=e.isSuccess?"success":"failed",t.eventTrack("p1_sent_app_link_text",{send_status:i})})})},e.sendLink=function(){var n;e.submitting=!0;try{return i()}catch(t){return n=t,e.submitting=!1,r.error(n)}}}]).run(["$templateCache",function(e){return e.put("hop-templates/hop-vg-overlay-play",'<div class="overlay" ng-click="onClickOverlayPlay()"">\n  <button type="button" class="btn play-button">\n    <span class="glyphicon glyphicon-play" aria-hidden="true"></span>\n  </button>\n</div>')}]).run(["$location","$analytics","deviceDetector","$cookies",function(e,n,t,r){var i,a,c,o,u,l;return c=function(){var e,n,r;return n={"(min-width: 768px)":"sm","(min-width: 992px)":"md","(min-width: 1200px)":"lg"},e="Unknown",window.matchMedia&&(r="xs",angular.forEach(n,function(e,n){return window.matchMedia(n).matches?r=e:void 0}),e=function(){switch(r){case"xs":return t.os+"_phone";case"sm":return t.os+"_tablet";case"md":return"Desktop";case"lg":return"Desktop"}}()),e},a=function(){switch(t.device){case"ipad":return"tablet";case"chrome-book":return"desktop";case"unknown":return"desktop";default:return"mobile"}},l={flight_feed:/^\/flights\/feed/,deals_list:/^\/deals\/from/,deals_detail:/^\/deals\/\d+/,article:/^\/articles\/\d+/,guide:/^\/flights\/from/,app_redirect:/^\/download\/app/},u=function(e){var n,t;return n=document.createElement("a"),n.href=e,t=void 0,angular.forEach(l,function(e,r){return n.pathname.match(e)?t=r:void 0}),t},o={homepage_mode:c(),viewed_type:"Booking_Android_homepage",viewed_url:e.absUrl(),landing_page_type:"Booking_Android_homepage",device_type:a(),previous_type:u(document.referrer),previous_url:document.referrer},i=r.getObject("branch_data"),i&&angular.forEach(i,function(e,n){return o["branch_"+n]=i[n]}),n.setSuperProperties(o),n.eventTrack("p1_page_view")}]);